# Планерка - сервис автоматической генерации расписаний

## Описание

Многие учебные заведения сегодня сталкиваются с проблемой составления расписаний для учащихся. Эти расписания должны содержать как можно меньше «окон» и учитывать пожелания преподавателей и администрации. Мой проект — это веб‑сайт, где представители учебных заведений могут легко создавать свои расписания. Достаточно ввести данные о преподавателях, учениках, занятиях и классах в учебном заведении — после этого алгоритм подберёт оптимальный вариант расписания, который можно скачать с сайта в удобных форматах и для разных ролей (группы, студенты, преподаватели и т. д.).
Вся информация о школе хранится в зашифрованном виде, поэтому даже создатели сервиса не имеют доступа к персональным данным.

Платформа состоит из фронтенда на React/Vite, бэкенда на FastAPI, PostgreSQL для реляционных данных и MinIO (совместимый с S3) для защищённого хранения файлов. Всё контейнеризовано, поэтому полный стек можно запустить одной командой во время разработки или демонстрации.

## Установка

### 1. Запуск полного стека через Docker

Требования:
- Docker (24+) и плагин Docker Compose (v2)
- 4 ГБ ОЗУ для контейнеров

**⚠️ Обязательная настройка**:
```bash
# Скопируйте шаблон окружения и добавьте свой API-ключ
cp backend/.env.example backend/.env
# Отредактируйте backend/.env и добавьте RESEND_API_KEY для работы с почтой
```

```bash
docker compose up --build
```

Команда запускает бэкенд (FastAPI + uvicorn), React-фронтенд, отдаваемый Nginx, PostgreSQL 18 и MinIO. Переменные окружения для бэкенда уже заданы в `docker-compose.yml`, но их можно переопределить в файле `.env` в каталоге backend (Compose автоматически его подхватывает). **Примечание**: необходимо создать `backend/.env` с `RESEND_API_KEY`, чтобы работали функции, связанные с электронной почтой.

### 2. Запуск сервисов локально без Docker

**Бэкенд**
```bash
cd backend
uv sync                  # установка зависимостей Python
cp .env.example .env     # ОБЯЗАТЕЛЬНО: скопировать шаблон окружения
# ВАЖНО: отредактируйте backend/.env и добавьте RESEND_API_KEY для работы с почтой
uv run alembic upgrade head
uv run uvicorn app.main:app --reload
```

**⚠️ Важно**: после копирования `.env.example` в `.env` вы **должны** добавить свой `RESEND_API_KEY` в файл `.env`, чтобы работали верификация по почте и сброс пароля. Ключ можно получить в [Resend](https://resend.com).

**Фронтенд**
```bash
cd frontend
npm install
npm run dev
```

**Вспомогательная инфраструктура**
- PostgreSQL 15+ с базой данных и пользователем, соответствующими переменным в `.env`
- MinIO (рекомендуется) или любое S3-совместимое хранилище; при необходимости обновите `S3_ENDPOINT_URL`, учётные данные и имя бакета.

### 3. Дополнительная документация
- `backend/README.md` — команды, миграции и заметки по API бэкенда.
- `frontend/README.md` — скрипты Vite, линтинг и тестирование React-приложения.

## Требования

- **Бэкенд**: Python 3.13, FastAPI, SQLAlchemy Async, Alembic, asyncpg, aioboto3.
- **Фронтенд**: React 19, TypeScript, Vite, Vitest, ESLint.
- **Инфраструктура**: PostgreSQL 18 (или совместимая), MinIO/S3, Docker и Compose для оркестрации.
- **Инструменты**: `uv` для управления зависимостями Python, Node.js 20+ для инструментария фронтенда.

## Возможности

- Генерация бесконфликтных учебных расписаний с учётом студентов, групп и преподавателей.
- Хранение данных учреждения в зашифрованном виде; файлы лежат в MinIO/S3 и не хранятся на диске.
- REST API для проверки состояния и (в перспективе) управления расписанием; в бэкенде уже настроены жизненные циклы БД и хранилища.
- Контейнеризованный стек для воспроизводимых развёртываний и быстрого старта.
